<html>
  <head>
  </head>
  <body>
    <input type="button" id="run" value="Web Assembly Check" />
  </body>
  <script type="text/javascript" src="./a.out.js"></script>
  <script>
    // Check for wasm support.
    if (!('WebAssembly' in window)) {
      alert('you need a browser with wasm support enabled :(');
    } else {
      const button = document.getElementById('run');
      button.value = "Web Assembly Ready";
      button.addEventListener("click", () => {
        runWebAssembly();
      })
    }

    function runWebAssembly(){
      console.log('runWebAssembly');
      console.log(WebAssembly);
      WebAssembly.instantiateStreaming(fetch('http://localhost:5000/wasm'), {}).then(results => {
        console.log("response");
        console.log(results);
      })
    }
  </script>
</html>